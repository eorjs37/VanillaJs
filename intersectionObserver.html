<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
    <link rel="stylesheet" href="./styles/intersection.css" />
  </head>
  <body>
    <ul class="container">
      <li class="card">아이템 1</li>
      <li class="card">아이템 2</li>
      <li class="card">아이템 3</li>
      <li class="card">아이템 4</li>
      <li class="card">아이템 5</li>
      <li class="card">아이템 6</li>
      <li class="card">아이템 7</li>
      <li class="card">아이템 8</li>
      <li class="card">아이템 9</li>
      <li class="card">아이템 10</li>
    </ul>
  </body>
  <script>
    const $cards = document.querySelectorAll('.card');
    const obeserver = new IntersectionObserver(
      entries => {
        entries.forEach(entry => {
          entry.target.classList.toggle('visible', entry.isIntersecting);
          // 1. 요소가 화면에 나타났다면
          if (entry.isIntersecting) {
            // 2. 옵저버 객체의 unobserve 메서드로 요소의 감지를 해제합니다!
            obeserver.unobserve(entry.target);
          }
        });
      },
      { threshold: 0.5 }
    );

    $cards.forEach(card => {
      // 1. 모든 .card 요소의 인터섹션을 감지합니다.
      obeserver.observe(card);
    });
  </script>
</html>
