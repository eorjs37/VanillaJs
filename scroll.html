<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>scroll</title>
    <link rel="stylesheet" href="./styles/scroll.css" />
  </head>
  <body>
    <div class="container">
      <ul class="card">
        <li class="card-item">리스트1</li>
        <li class="card-item">리스트2</li>
        <li class="card-item">리스트3</li>
        <li class="card-item">리스트4</li>
        <li class="card-item">리스트5</li>
        <li class="card-item">리스트6</li>
        <li class="card-item">리스트7</li>
        <li class="card-item">리스트8</li>
        <li class="card-item">리스트9</li>
        <li class="card-item">리스트10</li>
        <li class="card-item">리스트11</li>
        <li class="card-item">리스트12</li>
        <li class="card-item">리스트13</li>
        <li class="card-item">리스트14</li>
      </ul>
    </div>

    <script>
      const $cardItem = document.querySelectorAll('.card-item');

      const callback = entries => {
        entries.forEach(entry => {
          //화면에 보여지는 순간 visible class 추가
          entry.target.classList.toggle('visible', entry.isIntersecting);
          //화면에 보여지고 있는지 확인
          if (entry.isIntersecting) {
            //위로이동했을때 이벤트 동작하지 않도록 구독 해지
            //화면에 현재 보여지고 있다면 구독 해지
            observer.unobserve(entry.target);
          }
        });
      };
      const observer = new IntersectionObserver(callback, {
        threshold: 0.1,
      });

      $cardItem.forEach(item => {
        observer.observe(item);
      });
    </script>
  </body>
</html>
